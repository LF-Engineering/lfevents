document.addEventListener("DOMContentLoaded",(function(e){const s=document.querySelector(".conblockpro-puri-sl-manage-link"),o=document.querySelector(".conblockpro-puri-sl-row"),t=document.querySelector(`tr[data-plugin="${conblockpro_puri_sl.slug}"`);t&&"valid"!==conblockpro_puri_sl.license_status&&t.classList.add("update"),s.addEventListener("click",(function(e){e.preventDefault(),"none"===o.style.display?o.style.display="":o.style.display="none"}));const n=document.querySelectorAll(".conblockpro-puri-sl-button");for(const e of n)e.addEventListener("click",(function(e){e.preventDefault();const s=this.querySelector(".dashicons");s.classList.remove("dashicons-yes-alt"),s.classList.add("dashicons-update"),s.classList.add("conblockpro-puri-sl-spin");const o=this.getAttribute("data-nonce"),t=this.getAttribute("data-action"),n=this.getAttribute("data-operation"),c=document.querySelector(".conblockpro-puri-sl-license-key").value,a={nonce:o,action:t,operation:n,license:c};fetch(conblockpro_puri_sl.ajax_url,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:new URLSearchParams(a)}).then((e=>e.json())).then((e=>{const o=document.querySelector(".conblockpro-puri-sl-message");if(o&&(o.innerHTML=`<span style="margin-right:3px;" class="dashicons dashicons-info"></span>${e.data.message}`),!0===e.success)return s.classList.remove("dashicons-update","conblockpro-puri-sl-spin"),s.classList.add("dashicons-yes-alt"),"change_beta"===n&&(this.innerHTML='<span class="dashicons dashicons-hammer"></span> Revert'),void(!0===e.data.reload&&location.reload(!1));s.classList.remove("dashicons-update","conblockpro-puri-sl-spin"),s.classList.add("dashicons-dismiss")})).catch((e=>console.log(e)))}))}));